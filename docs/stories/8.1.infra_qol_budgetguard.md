Status: Done

Story
- As an infra user on Lambda,
- I want clearer BudgetGuard projections and infra guidance,
- so that I can plan cost/time and configure caches effectively.

Acceptance Criteria
- `scripts/run_evalset.sh` prints clearer projection guidance (suggested `SUBSET`, models×seeds×items breakdown) sourced from BudgetGuard.
- `docs/getting-started/usage.md` or `README.md` documents recommended Lambda instance types and expected throughput for 8B models.
- `.env.example` and docs mention setting `HF_HOME`/`TRANSFORMERS_CACHE` and expected disk space for model caches.
- Optional: `make download-models` notes how to warm cache and expected storage footprint; instructions reference `MODELS` env.

Tasks / Subtasks
- [x] Improve projection printouts in `scripts/run_evalset.sh` and add a short guide paragraph in echo output sourced from BudgetGuard state.
- [x] Update docs for instance type guidance (A100 40/80GB) and throughput expectations for 8B models.
- [x] Update `.env.example` with commented `HF_HOME` and `TRANSFORMERS_CACHE` examples and brief note on cache size.

Dev Notes
- Reference: `robustcbrn/budget_guard.py`, `.env.example`, `scripts/download_models.sh`, `scripts/run_evalset.sh`.

Testing
- Manual: set env and run `make run SUBSET=64` to verify improved projection output and that docs changes are visible.

Change Log
- 2025-09-14 v1 Draft initial story (SM)
 - 2025-09-14 v2 Implemented BudgetGuard QoL: clearer projections, instance guidance, cache docs (Dev)

Dev Agent Record
- Agent Model Used: James (dev)

- Debug Log References
  - Verified `scripts/run_evalset.sh` prints models×seeds×items breakdown and budget-based `SUBSET` suggestion when `GPU_HOURLY_USD` is set.
  - Manual dry-run with `SUBSET=64` and `.budget/budget.json` present confirmed suggestion computation and guidance text.

- Completion Notes List
  - Enhanced `scripts/run_evalset.sh` to compute workload breakdown and recommend `SUBSET` using BudgetGuard’s state file and configured budget/hourly rate.
  - Added instance sizing and throughput heuristics to `docs/getting-started/usage.md`; noted that the runner uses ~25 items/sec for 8B projections.
  - Documented HF caches in `.env.example` with `HF_HOME`/`TRANSFORMERS_CACHE` examples and expected per‑model disk usage; added cache notes to `scripts/download_models.sh`.

- File List:
  - modified: `scripts/run_evalset.sh`
  - modified: `docs/getting-started/usage.md`
  - modified: `README.md`
  - modified: `.env.example`
  - modified: `scripts/download_models.sh`

## QA Results

### Review Date: 2025-09-14

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

- `scripts/run_evalset.sh` clearly prints workload breakdown (models×seeds×items) and computes a budget-based `SUBSET` suggestion when `GPU_HOURLY_USD` is set; logs are informative and failure-tolerant for provider availability.
- Documentation updates meet intent: instance sizing/throughput guidance for 8B on A100, cache location and expected footprint, and cache-warming flow are clear and actionable.
- Minor improvement opportunity: the per-item hour constant (`0.000011`) is a magic number; consider centralizing it (config or shared helper) or sourcing from BudgetGuard to avoid drift from documented heuristics.

### Refactoring Performed

- None during this review. Recommendations below are advisory.

### Compliance Check

- Coding Standards: N/A (no project coding-standards doc found)
- Project Structure: ✓ (scripts/docs changes only; aligns with current layout)
- Testing Strategy: N/A/Minimal (manual verification steps provided; no new unit-testable Python added)
- All ACs Met: ✓

### Improvements Checklist

- [ ] Centralize `PER_ITEM_H` (0.000011 h/item/model-seed) in config or a library to prevent divergence from docs.
- [ ] Document `BUDGET_DIR`/`budget.json` behavior in `docs/getting-started/usage.md` (how remaining hours are derived, defaults, and override).
- [ ] Optional: add a tiny smoke test asserting projection lines render when `GPU_HOURLY_USD` is set (golden log snippet).

### Security Review

- No secrets printed; only generic env hints shown. No new external network calls beyond existing CLI/HF usage paths. Low risk.

### Performance Considerations

- Heuristic and 10% safety margin are reasonable; guidance steers users toward controlling `SUBSET`, `MODELS`, and `SEEDS` effectively.

### Files Modified During Review

- robustcbrn/utils/cost.py (new): Centralized throughput/cost heuristic and helpers.
- robustcbrn/cli/projection.py (new): Projection CLI used by the runner to print guidance.
- scripts/run_evalset.sh: Now uses centralized helpers and projection CLI.
- docs/getting-started/usage.md: Added budget state/overrides section and clarified heuristic centralization.
- tests/test_projection_cli.py (new): Smoke test asserting projection output.

Dev: please update the File List above to include these changes.

### Gate Status

Gate: PASS → docs/qa/gates/8.1-infra_qol_budgetguard.yml

### Recommended Status

✓ Ready for Done

### Review Date: 2025-09-14 (Follow-up)

### Reviewed By: Quinn (Test Architect)

### Summary of Implemented Suggestions

- Centralized per-item hour heuristic and exposed a projection CLI used by the runner.
- Enhanced docs with a clear budget state section and pointer from READMEs.
- Added a minimal smoke test to assert projection output.

### Files Modified During Review (Follow-up)

- robustcbrn/utils/cost.py (new)
- robustcbrn/cli/projection.py (new)
- scripts/run_evalset.sh (updated)
- docs/getting-started/usage.md (updated)
- README.md (updated)
- docs/README.md (updated)
- tests/test_projection_cli.py (new)

Dev: please update the File List to include these changes.

### Post-hackathon Update (2025-09-14, later)

- Team decision: remove budget-based projection/guarding and associated docs to simplify usage under fixed platform credits.
- Runner now prints only a workload breakdown (models×seeds×items); no SUBSET suggestions.
- Removed or updated: `robustcbrn/budget_guard.py` (deleted), `robustcbrn/cli/projection.py` (deleted), `tests/test_projection_cli.py` (deleted), `.env.example` budget vars (removed), `docs/getting-started/usage.md` budget section (removed), `docs/cost-budget/cost-plan.md` (removed), and related links.
